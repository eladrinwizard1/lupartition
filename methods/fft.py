def fft_partition(tree, key, parts, lower, upper):
    """
    Implements `partition` with the improved naive O(pu(p + log u)n) algorithm.
    """
    raise NotImplementedError


def fft_decision(tree, key, parts, lower, upper):
    """
    Implements the decision problem variant of the O(pu(p + log u)n) algorithm.
    """
    raise NotImplementedError
